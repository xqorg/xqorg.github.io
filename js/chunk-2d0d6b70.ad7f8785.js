(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6b70"],{7474:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t._self._c;return e("page-header-wrapper",{on:{back:t.back},scopedSlots:t._u([{key:"breadcrumb",fn:function(){return[t._v(" "+t._s(t.formTitle)+" ")]},proxy:!0},{key:"title",fn:function(){return[t._v(" "+t._s(t.formTitle)+" ")]},proxy:!0},{key:"content",fn:function(){},proxy:!0},{key:"extraContent",fn:function(){},proxy:!0},{key:"extra",fn:function(){return[e("a-space",[e("a-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" 发布 ")]),e("a-button",{attrs:{type:"dashed"},on:{click:t.back}},[t._v(" 取消 ")])],1)]},proxy:!0}])},[e("a-card",{attrs:{bordered:!1}},[e("a-row",{attrs:{gutter:12}},[e("a-col",{attrs:{span:24}},[e("a-form-model",{ref:"baseForm",attrs:{model:t.form,rules:t.baseRules,"wrapper-col":t.wrapperCol}},[e("a-form-model-item",{attrs:{prop:"noticeTitle"}},[e("a-input",{attrs:{size:"large",placeholder:"请输入标题"},model:{value:t.form.noticeTitle,callback:function(e){t.$set(t.form,"noticeTitle",e)},expression:"form.noticeTitle"}})],1),e("a-form-model-item",{attrs:{prop:"noticeContent"}},[e("editor",{model:{value:t.form.noticeContent,callback:function(e){t.$set(t.form,"noticeContent",e)},expression:"form.noticeContent"}})],1)],1)],1)],1)],1),e("a-drawer",{attrs:{width:"30%","label-col":4,"wrapper-col":14,visible:t.open},on:{close:t.onClose}},[e("a-divider",{attrs:{orientation:"left"}},[e("b",[t._v(t._s(t.formTitle))])]),e("a-form-model",{ref:"form",attrs:{model:t.form,rules:t.rules}},[e("a-form-model-item",{attrs:{label:"公告类型",prop:"noticeType"}},[e("a-select",{attrs:{placeholder:"请选择"},model:{value:t.form.noticeType,callback:function(e){t.$set(t.form,"noticeType",e)},expression:"form.noticeType"}},t._l(t.dict.type["sys_notice_type"],(function(o,n){return e("a-select-option",{key:n,attrs:{value:o.value}},[t._v(t._s(o.label))])})),1)],1),e("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[e("a-radio-group",{attrs:{"button-style":"solid"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.dict.type["sys_notice_status"],(function(o,n){return e("a-radio-button",{key:n,attrs:{value:o.value}},[t._v(t._s(o.label))])})),1)],1),e("div",{staticClass:"bottom-control"},[e("a-space",[e("a-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitForm}},[t._v(" 发布 ")]),e("a-button",{attrs:{type:"dashed"},on:{click:t.onClose}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)},i=[],r=(o("d3b7"),o("8b29")),a=o("2443"),s={name:"NoticeForm",components:{Editor:a["a"]},dicts:["sys_notice_status","sys_notice_type"],data:function(){return{labelCol:{span:4},wrapperCol:{span:24},submitLoading:!1,total:0,id:void 0,formTitle:"",form:{noticeId:void 0,noticeTitle:void 0,noticeType:void 0,noticeContent:"",status:"0"},baseRules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}]},rules:{noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]},open:!1}},filters:{},created:function(){},computed:{},watch:{},mounted:function(){this.id=this.$route.params.id,this.formTitle=this.$route.params.formTitle,this.id?this.handleUpdate(this.id):this.handleAdd()},methods:{reset:function(){this.form={noticeId:void 0,noticeTitle:void 0,noticeType:void 0,noticeContent:"",status:"0"}},handleAdd:function(){this.reset(),this.formTitle="添加公告"},handleUpdate:function(t){var e=this;this.reset();var o=t;Object(r["c"])(o).then((function(t){e.form=t.data,e.formTitle="修改公告"}))},submitForm:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;t.submitLoading=!0,void 0!==t.form.noticeId?Object(r["e"])(t.form).then((function(e){t.$message.success("修改成功",3),t.back()})).finally((function(){t.submitLoading=!1})):Object(r["a"])(t.form).then((function(e){t.$message.success("新增成功",3),t.back()})).finally((function(){t.submitLoading=!1}))}))},back:function(){this.$router.push("/system/notice")},onClose:function(){this.open=!1},handleSubmit:function(){var t=this;this.$refs.baseForm.validate((function(e){if(!e)return!1;t.open=!0}))}}},c=s,l=o("2877"),u=Object(l["a"])(c,n,i,!1,null,null,null);e["default"]=u.exports}}]);