(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3788bcf5"],{2076:function(t,e,a){"use strict";a.d(e,"e",(function(){return s})),a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return o})),a.d(e,"a",(function(){return n})),a.d(e,"f",(function(){return c})),a.d(e,"b",(function(){return l}));var i=a("b775");function s(t){return Object(i["b"])({url:"/payment/order/list",method:"get",params:t})}function r(t){return Object(i["b"])({url:"/payment/order/"+t,method:"get"})}function o(t){return Object(i["b"])({url:"/payment/order/status/"+t,method:"get"})}function n(t){return Object(i["b"])({url:"/payment/order",method:"post",data:t})}function c(t){return Object(i["b"])({url:"/payment/order",method:"put",data:t})}function l(t){return Object(i["b"])({url:"/payment/order/"+t,method:"delete"})}},"9ef0":function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"e",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n})),a.d(e,"f",(function(){return c})),a.d(e,"b",(function(){return l}));var i=a("b775");function s(t){return Object(i["b"])({url:"/payment/goods/list",method:"get",params:t})}function r(){return Object(i["b"])({url:"/payment/goods/nameList",method:"get"})}function o(t){return Object(i["b"])({url:"/payment/goods/"+t,method:"get"})}function n(t){return Object(i["b"])({url:"/payment/goods",method:"post",data:t})}function c(t){return Object(i["b"])({url:"/payment/goods",method:"put",data:t})}function l(t){return Object(i["b"])({url:"/payment/goods/"+t,method:"delete"})}},a1c3:function(t,e,a){},a98f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{bordered:!1}},[e("a-result",{staticStyle:{"margin-top":"-40px"},attrs:{title:t.goodsName},scopedSlots:t._u([{key:"icon",fn:function(){return[e("svg",{staticClass:"icon",attrs:{t:"1680424679798",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7722",width:"100",height:"100"}},[e("path",{attrs:{d:"M215.6 385.6h592.8c11 0 20 9 20 20V864c0 11-9 20-20 20H215.6c-11 0-20-9-20-20V405.6c0-11 9-20 20-20z",fill:"#8BD5C9","p-id":"7723"}}),e("path",{attrs:{d:"M808.4 385.6H512V884h296.4c11 0 20-9 20-20V405.6c0-11-9-20-20-20z",fill:"#71C6B8","p-id":"7724"}}),e("path",{attrs:{d:"M174 254.4h676c11 0 20 9 20 20v112.6c0 11-9 20-20 20H174c-11 0-20-9-20-20v-112.6c0-11.2 9-20 20-20z",fill:"#FDE4B1","p-id":"7725"}}),e("path",{attrs:{d:"M850 254.4H512v152.6h338c11 0 20-9 20-20v-112.6c0-11-9-20-20-20z",fill:"#F4BD6C","p-id":"7726"}}),e("path",{attrs:{d:"M444.4 253.4h135.4V884h-135.4V253.4z",fill:"#F17954","p-id":"7727"}}),e("path",{attrs:{d:"M512 253.4h67.8V884H512z",fill:"#D85735","p-id":"7728"}}),e("path",{attrs:{d:"M732.2 112.2c-66-22.6-166.8 52.4-205 83.8-5.6-2.4-22.2-3.8-30.6 0-38.2-31.4-139-106.4-205-83.8-62.2 21.2-71 62.2-71 113.6s8.8 92.4 71 113.6c54 18.4 131.2-28.4 178.4-63.2 17.2-10.4 21.4-13.2 33.4-18.8 5 0.8 11.8 1.4 17 0 19.8 10.6 22.4 12.4 33.4 18.8 47.2 34.8 124.4 81.6 178.4 63.2 62.2-21.2 71-62.2 71-113.6s-9-92.4-71-113.6z m-442 178.8c-40-15.2-57.6-44-57.6-65.2s17.8-50 57.6-65.2c29-11 138 30.6 191.6 52.4-2.2 7.4-1.2 20.8 0 25.2-53.6 22.2-162.6 63.8-191.6 52.8z m443.6 0c-29 11-138-30.6-191.6-52.4 0.2-0.8 3-14.8 0-25.2 53.6-21.8 162.8-63.4 191.6-52.4 40 15.2 57.6 44 57.6 65.2s-17.6 49.6-57.6 64.8z",fill:"#F17954","p-id":"7729"}}),e("path",{attrs:{d:"M732.2 112.2c-66-22.6-166.8 52.4-205 83.8-3-1.2-9-2.2-15.2-2.4v64.6c3 0 5.8-0.2 8.4-0.8 19.8 10.6 22.4 12.4 33.4 18.8 47.2 34.8 124.4 81.6 178.4 63.2 62.2-21.2 71-62.2 71-113.6 0-51.4-9-92.4-71-113.6z m1.6 178.8c-29 11-138-30.6-191.6-52.4 0.2-0.8 3-14.8 0-25.2 53.6-21.8 162.8-63.4 191.6-52.4 40 15.2 57.6 44 57.6 65.2 0 21.2-17.6 49.6-57.6 64.8z",fill:"#D85735","p-id":"7730"}})])]},proxy:!0},{key:"extra",fn:function(){return[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.paySuccess,expression:"!paySuccess"}],staticClass:"amount"},[e("span",{staticClass:"amount-price"},[t._v(t._s(t.currentPrice))]),t._v(" RMB ")]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.paySuccess,expression:"!paySuccess"}],staticClass:"amount-day"},[217!==t.currentPrice?e("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":"1"},on:{change:t.priceHandleChange}},[e("a-select-option",{attrs:{value:"1"}},[t._v(" 1个月 ")]),e("a-select-option",{attrs:{value:"3"}},[t._v(" 3个月 ")]),e("a-select-option",{attrs:{value:"12"}},[t._v(" 土豪买1年 ")])],1):t._e(),t.currentDiscount>0?e("div",{staticClass:"discount"},[e("a-alert",{staticStyle:{width:"260px","text-align":"left",margin:"0 auto"},attrs:{type:"info","show-icon":""}},[e("template",{slot:"message"},[t._v(" 原价 "),e("del",[e("b",[t._v(t._s(t.currentPrice+t.currentDiscount))])]),t._v(" 元，订阅时间越长越优惠。 ")])],2)],1):t._e()],1),e("a-result",{directives:[{name:"show",rawName:"v-show",value:t.paySuccess,expression:"paySuccess"}],attrs:{status:"success",title:t.$t("paySuccess"),"sub-title":t.$t("payOrderNo")+t.orderNo+"，"+t.$t("payWait")},scopedSlots:t._u([{key:"extra",fn:function(){return[e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({path:"/payment/order"})}}},[t._v(" "+t._s(t.$t("go.order"))+" ")])]},proxy:!0}])}),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.paySuccess,expression:"!paySuccess"}],staticClass:"pay-btn-div"},[e("a-button",{staticClass:"alipay-btn",attrs:{type:"primary",icon:"alipay-circle",disabled:""},on:{click:function(e){return t.handlePayQrcode("alipay")}}},[t._v(" 支付宝支付 ")]),t._v("   "),e("a-button",{staticClass:"wxpay-btn",staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"wechat"},on:{click:function(e){return t.handlePayQrcode("wechat")}}},[t._v(" 微信支付 ")])],1)]},proxy:!0}])},[e("template",{slot:"subTitle"},[t._v(" "+t._s(t.goodsDescription)+" ")]),e("div",{staticClass:"content"},[e("a-steps",{attrs:{current:t.currentStep,direction:t.isMobile&&t.directionType.vertical||t.directionType.horizontal,size:"small"}},[e("a-step",{attrs:{title:"选择商品"}},[e("span",{staticStyle:{"font-size":"14px"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("result.success.step1-title")))]),e("template",{slot:"description"},[e("div",{staticStyle:{fontSize:"12px",color:"rgba(0, 0, 0, 0.45)",position:"relative","text-align":"left"},attrs:{slot:"description"},slot:"description"},[e("div",{staticStyle:{margin:"8px 0 4px"}},[t._v(" "+t._s(t.goodsName)+" ")])])])],2),e("a-step",{attrs:{title:"选择支付方式"}},[e("span",{staticStyle:{"font-size":"14px"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("result.success.step2-title")))]),e("template",{slot:"description"},[e("div",{staticStyle:{fontSize:"12px",color:"rgba(0, 0, 0, 0.45)",position:"relative","text-align":"left"},attrs:{slot:"description"},slot:"description"},[e("div",{staticStyle:{margin:"8px 0px 4px"}},[t._v(" 可使用支付宝、微信 ")])])])],2),e("a-step",{attrs:{title:"等待支付"}},[e("span",{staticStyle:{"font-size":"14px"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("result.success.step3-title")))]),e("template",{slot:"description"},[e("div",{staticStyle:{fontSize:"12px",color:"rgba(0, 0, 0, 0.45)",position:"relative","text-align":"left"},attrs:{slot:"description"},slot:"description"},[e("div",{staticStyle:{margin:"8px 0px 4px"}},[t._v(" 请在2分钟内完成支付 ")])])])],2),e("a-step",{attrs:{title:"支付成功"}},[e("span",{staticStyle:{"font-size":"14px"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$t("result.success.step4-title")))]),e("template",{slot:"description"},[e("div",{staticStyle:{fontSize:"12px",color:"rgba(0, 0, 0, 0.45)",position:"relative","text-align":"left"},attrs:{slot:"description"},slot:"description"},[e("div",{staticStyle:{margin:"8px 0px 4px"}},[t._v(" 支付完成开始使用 ")])])])],2)],1)],1)],2),e("a-modal",{attrs:{footer:null,afterClose:t.aliPayModalClose},model:{value:t.aliPayVisible,callback:function(e){t.aliPayVisible=e},expression:"aliPayVisible"}},[e("template",{slot:"title"},["alipay"==t.payMethod?e("div",[e("a-icon",{attrs:{type:"alipay"}}),t._v(" 等待支付宝扫码支付")],1):e("div",[e("a-icon",{attrs:{type:"wechat"}}),t._v(" 等待微信扫码支付")],1)]),e("div",{staticStyle:{"text-align":"center","min-height":"250px"}},[t.showAlipayLoading?e("div",{staticStyle:{height:"0"}},[e("a-spin",{staticStyle:{"margin-top":"70px"}})],1):t._e(),"alipay"==t.payMethod&&t.showAlipayIframe?e("iframe",{staticStyle:{overflow:"hidden","margin-left":"50px"},attrs:{srcdoc:t.payQrcode,frameborder:"no",marginwidth:"0",marginheight:"0",scrolling:"no",width:"250",height:"250"},on:{load:t.alipayIframeOnload}}):t._e(),"wechat"==t.payMethod&&t.showAlipayIframe?e("img",{staticStyle:{"margin-bottom":"17px"},attrs:{src:"https://qun.qq.com/qrcode/index?size=250&data="+t.payQrcode},on:{load:t.alipayIframeOnload}}):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.showAlipayLoading,expression:"!showAlipayLoading"}],staticStyle:{"margin-top":"-28px","text-align":"left"}},[e("a-alert",{staticStyle:{width:"240px",margin:"0 auto"},attrs:{type:"info"}},[e("template",{slot:"message"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.paySuccess,expression:"!paySuccess"}]},[e("a-icon",{attrs:{type:"loading"}}),t._v("  请在2分钟内完成,等待支付中... ")],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.paySuccess,expression:"paySuccess"}]},[e("a-icon",{staticStyle:{color:"green"},attrs:{type:"check-circle"}}),t._v(" "),e("span",{staticStyle:{color:"green"}},[t._v("已完成支付，正在处理中...")])],1)])],2)],1)])],2)],1)},s=[],r=(a("a4d3"),a("e01a"),a("b0c0"),a("432b")),o=a("9ef0"),n=a("2076"),c=a("b775");function l(t){return Object(c["b"])({url:"/payment/payQrcode",method:"post",data:t})}var d={horizontal:"horizontal",vertical:"vertical"},u={name:"Buy",mixins:[r["a"]],data:function(){return this.directionType=d,{queryTimer:null,currentStep:1,payQrcode:"",showAlipayIframe:!1,showAlipayLoading:!0,aliPayVisible:!1,goodsName:"",goodsDescription:"",orderNo:"",goodsPrice:0,duration:1,discount:{},currentPrice:0,currentDiscount:0,paySuccess:!1,payMethod:""}},computed:{result:function(){return{title:this.$t("result.success.title"),description:this.$t("result.success.description")}}},methods:{handleQueryGoods:function(){var t=this;Object(o["c"])(this.$route.query.g).then((function(e){t.goodsName=e.data.name,t.goodsDescription=e.data.description,t.goodsPrice=e.data.price,t.currentPrice=e.data.price,t.discount=e.data.discount}))},handleQueryOrder:function(){var t=this;Object(n["d"])(this.orderNo).then((function(e){"1"==e.data&&(clearInterval(t.queryTimer),t.queryTimer=null,t.paySuccess=!0,t.currentStep=3,setTimeout((function(){t.aliPayVisible=!1}),1e3))})).catch((function(){clearInterval(t.queryTimer),t.queryTimer=null}))},aliPayModalClose:function(){this.showAlipayIframe=!1,this.showAlipayLoading=!0},alipayIframeOnload:function(){this.currentStep=2,this.showAlipayLoading=!1},handlePayQrcode:function(t){var e=this;this.payMethod=t,this.aliPayVisible=!0,l({goodsId:this.$route.query.g,duration:this.duration,paymentMethod:t}).then((function(t){e.payQrcode=t.data.qrCode,e.orderNo=t.data.orderNo,e.showAlipayIframe=!0,e.queryTimer=window.setInterval((function(){setTimeout(e.handleQueryOrder(),0)}),1500)}))},priceHandleChange:function(t){this.duration=t,this.currentPrice=this.goodsPrice*t-this.discount[t],this.currentDiscount=this.discount[t]}},created:function(){this.handleQueryGoods()}},p=u,y=(a("e040"),a("2877")),h=Object(y["a"])(p,i,s,!1,null,"a5509584",null);e["default"]=h.exports},e040:function(t,e,a){"use strict";a("a1c3")}}]);