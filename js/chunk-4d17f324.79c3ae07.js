(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d17f324"],{8631:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e._self._c;return t("a-modal",{ref:"authRole",attrs:{title:"分配角色",width:900,visible:e.visible,"confirm-loading":e.submitLoading},on:{cancel:e.close,ok:e.confirm}},[t("div",{staticClass:"page-header-content"},[t("a-card",{staticClass:"content",attrs:{bordered:!1}},[t("a-table",{attrs:{loading:e.loading,size:e.tableSize,rowKey:"roleId",columns:e.columns,"data-source":e.list,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},scroll:{y:e.tableHeight},pagination:!1,bordered:e.tableBordered},scopedSlots:e._u([{key:"createTime",fn:function(n,s){return t("span",{},[e._v(" "+e._s(e.parseTime(s.createTime))+" ")])}}])})],1)],1)])},r=[],u=(n("d81d"),n("d3b7"),n("c0c7")),o=n("435a"),i={name:"AuthRole",props:{},components:{},mixins:[o["a"]],data:function(){return{list:[],user:{},selectedRowKeys:[],selectedRows:[],tableHeight:document.documentElement.scrollHeight-500+"px",roleIds:[],loading:!1,submitLoading:!1,visible:!1,columns:[{title:"角色编号",dataIndex:"roleId",ellipsis:!0,align:"center"},{title:"角色名称",dataIndex:"roleName",ellipsis:!0,align:"center"},{title:"权限字符",dataIndex:"roleKey",ellipsis:!0,align:"center"},{title:"创建时间",dataIndex:"createTime",scopedSlots:{customRender:"createTime"},align:"center"}]}},created:function(){},methods:{getList:function(e){var t=this;this.loading=!0,Object(u["e"])(e).then((function(e){200===e.code&&(t.list=e.roles,t.user=e.user,t.$nextTick((function(){var n=e.user.roles.map((function(e){return e.roleId}));t.roleIds=n,t.selectedRowKeys=n})),t.loading=!1)}))},close:function(){this.visible=!1,this.selectedRowKeys=[],this.selectedRows=[]},handleAuthRole:function(e){this.visible=!0,this.getList(e.userId)},confirm:function(){var e=this;this.submitLoading=!0,Object(u["k"])({userId:this.user.userId,roleIds:this.roleIds}).then((function(t){e.$message.success(t.msg),e.visible=!1,e.$emit("ok")})).finally((function(){e.submitLoading=!1}))},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t,this.roleIds=this.selectedRows.map((function(e){return e.roleId})),this.single=1!==e.length,this.multiple=!e.length}}},c=i,l=n("2877"),d=Object(l["a"])(c,s,r,!1,null,null,null);t["default"]=d.exports},c0c7:function(e,t,n){"use strict";n.d(t,"i",(function(){return u})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"l",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"b",(function(){return a})),n.d(t,"g",(function(){return m})),n.d(t,"m",(function(){return f})),n.d(t,"n",(function(){return b})),n.d(t,"o",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"e",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"d",(function(){return w}));var s=n("b775"),r=n("c38a");function u(e){return Object(s["b"])({url:"/system/user/list",method:"get",params:e})}function o(e){return Object(s["b"])({url:"/system/user/"+Object(r["e"])(e),method:"get"})}function i(e){return Object(s["b"])({url:"/system/user",method:"post",data:e})}function c(e){return Object(s["b"])({url:"/system/user",method:"put",data:e})}function l(e){return Object(s["b"])({url:"/system/user/"+e,method:"delete"})}function d(e,t){var n={userId:e,password:t};return Object(s["b"])({url:"/system/user/resetPwd",method:"put",data:n})}function a(e,t){var n={userId:e,status:t};return Object(s["b"])({url:"/system/user/changeStatus",method:"put",data:n})}function m(){return Object(s["b"])({url:"/system/user/profile",method:"get"})}function f(e){return Object(s["b"])({url:"/system/user/profile",method:"put",data:e})}function b(e,t){var n={oldPassword:e,newPassword:t};return Object(s["b"])({url:"/system/user/profile/updatePwd",method:"put",params:n})}function h(e){return Object(s["b"])({url:"/system/user/profile/avatar",method:"post",data:e})}function p(e){return Object(s["b"])({url:"/system/user/importData",method:"post",data:e})}function g(e){return Object(s["b"])({url:"/system/user/authRole/"+e,method:"get"})}function y(e){return Object(s["b"])({url:"/system/user/authRole",method:"put",params:e})}function w(){return Object(s["b"])({url:"/system/user/deptTree",method:"get"})}}}]);