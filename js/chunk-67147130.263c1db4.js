(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67147130"],{c0c7:function(e,t,r){"use strict";r.d(t,"i",(function(){return a})),r.d(t,"f",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"l",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"j",(function(){return d})),r.d(t,"b",(function(){return m})),r.d(t,"g",(function(){return c})),r.d(t,"m",(function(){return p})),r.d(t,"n",(function(){return f})),r.d(t,"o",(function(){return b})),r.d(t,"h",(function(){return h})),r.d(t,"e",(function(){return v})),r.d(t,"k",(function(){return g})),r.d(t,"d",(function(){return y}));var o=r("b775"),s=r("c38a");function a(e){return Object(o["b"])({url:"/system/user/list",method:"get",params:e})}function n(e){return Object(o["b"])({url:"/system/user/"+Object(s["e"])(e),method:"get"})}function i(e){return Object(o["b"])({url:"/system/user",method:"post",data:e})}function u(e){return Object(o["b"])({url:"/system/user",method:"put",data:e})}function l(e){return Object(o["b"])({url:"/system/user/"+e,method:"delete"})}function d(e,t){var r={userId:e,password:t};return Object(o["b"])({url:"/system/user/resetPwd",method:"put",data:r})}function m(e,t){var r={userId:e,status:t};return Object(o["b"])({url:"/system/user/changeStatus",method:"put",data:r})}function c(){return Object(o["b"])({url:"/system/user/profile",method:"get"})}function p(e){return Object(o["b"])({url:"/system/user/profile",method:"put",data:e})}function f(e,t){var r={oldPassword:e,newPassword:t};return Object(o["b"])({url:"/system/user/profile/updatePwd",method:"put",params:r})}function b(e){return Object(o["b"])({url:"/system/user/profile/avatar",method:"post",data:e})}function h(e){return Object(o["b"])({url:"/system/user/importData",method:"post",data:e})}function v(e){return Object(o["b"])({url:"/system/user/authRole/"+e,method:"get"})}function g(e){return Object(o["b"])({url:"/system/user/authRole",method:"put",params:e})}function y(){return Object(o["b"])({url:"/system/user/deptTree",method:"get"})}},e0c2:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e._self._c;return t("a-drawer",{attrs:{width:"35%","label-col":4,"wrapper-col":14,visible:e.open},on:{close:e.onClose}},[t("a-divider",{attrs:{orientation:"left"}},[t("b",[e._v(e._s(e.formTitle))])]),t("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules}},[t("a-form-model-item",{attrs:{label:"用户昵称",prop:"nickName"}},[t("a-input",{attrs:{placeholder:"请输入",maxLength:30},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),t("a-form-model-item",{attrs:{label:"部门",prop:"deptId"}},[t("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.deptOptions,placeholder:"请选择",replaceFields:e.replaceFields,"tree-default-expand-all":""},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}})],1),t("a-form-model-item",{attrs:{label:"手机号",prop:"phonenumber"}},[t("a-input",{attrs:{placeholder:"请输入"},model:{value:e.form.phonenumber,callback:function(t){e.$set(e.form,"phonenumber",t)},expression:"form.phonenumber"}})],1),t("a-form-model-item",{attrs:{label:"邮箱",prop:"email"}},[t("a-input",{attrs:{placeholder:"请输入"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),void 0==e.form.userId?t("a-form-model-item",{attrs:{label:"用户名",prop:"userName"}},[t("a-input",{attrs:{placeholder:"请输入"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1):e._e(),void 0==e.form.userId?t("a-form-model-item",{attrs:{label:"密码",prop:"password"}},[t("a-input-password",{attrs:{placeholder:"请输入",maxLength:20},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),t("a-form-model-item",{attrs:{label:"性别",prop:"sex"}},[t("a-radio-group",{attrs:{"button-style":"solid"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.sexOptions,(function(r,o){return t("a-radio-button",{key:o,attrs:{value:r.value}},[e._v(e._s(r.label))])})),1)],1),t("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[t("a-radio-group",{attrs:{"button-style":"solid"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(r,o){return t("a-radio-button",{key:o,attrs:{value:r.value}},[e._v(e._s(r.label))])})),1)],1),t("a-form-model-item",{attrs:{label:"岗位",prop:"postIds"}},[t("a-select",{attrs:{mode:"multiple",placeholder:"请选择"},model:{value:e.form.postIds,callback:function(t){e.$set(e.form,"postIds",t)},expression:"form.postIds"}},e._l(e.postOptions,(function(r,o){return t("a-select-option",{key:o,attrs:{value:r.postId}},[e._v(" "+e._s(r.postName)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"角色",prop:"roleIds"}},[t("a-select",{attrs:{mode:"multiple",placeholder:"请选择"},model:{value:e.form.roleIds,callback:function(t){e.$set(e.form,"roleIds",t)},expression:"form.roleIds"}},e._l(e.roleOptions,(function(r,o){return t("a-select-option",{key:o,attrs:{value:r.roleId}},[e._v(" "+e._s(r.roleName)+" ")])})),1)],1),t("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[t("a-input",{attrs:{placeholder:"请输入",type:"textarea","allow-clear":""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),t("div",{staticClass:"bottom-control"},[t("a-space",[t("a-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.submitForm}},[e._v(" 保存 ")]),t("a-button",{attrs:{type:"dashed"},on:{click:e.cancel}},[e._v(" 取消 ")])],1)],1)],1)],1)},s=[],a=(r("d3b7"),r("c0c7")),n={name:"CreateForm",props:{deptOptions:{type:Array,required:!0},statusOptions:{type:Array,required:!0},sexOptions:{type:Array,required:!0}},components:{},data:function(){return{submitLoading:!1,replaceFields:{children:"children",title:"label",key:"id",value:"id"},postOptions:[],roleOptions:[],initPassword:void 0,formTitle:"",form:{userId:void 0,deptId:0,userName:void 0,nickName:void 0,password:void 0,phonenumber:void 0,email:void 0,sex:"3",status:"0",remark:void 0,postIds:[],roleIds:[]},open:!1,rules:{userName:[{required:!0,message:"用户名不能为空",trigger:"blur"}],nickName:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],deptId:[{required:!0,message:"部门不能为空",trigger:"change"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{type:"email",message:"请正确填写邮箱地址",trigger:["blur","change"]}],phonenumber:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请正确填写手机号",trigger:"blur"}]}}},filters:{},created:function(){var e=this;this.getConfigKey("sys.user.initPassword").then((function(t){e.initPassword=t.msg}))},computed:{},watch:{},methods:{onClose:function(){this.open=!1},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={userId:void 0,deptId:void 0,userName:void 0,nickName:void 0,password:void 0,phonenumber:void 0,email:void 0,sex:"3",status:"0",remark:void 0,postIds:[],roleIds:[]}},handleAdd:function(){var e=this;this.reset(),this.$emit("select-tree"),Object(a["f"])().then((function(t){e.postOptions=t.posts,e.roleOptions=t.roles,e.open=!0,e.formTitle="新增用户",e.form.password=e.initPassword}))},handleUpdate:function(e,t){var r=this;this.reset(),this.$emit("select-tree");var o=e?e.userId:t;Object(a["f"])(o).then((function(e){r.form=e.data,r.postOptions=e.posts,r.roleOptions=e.roles,r.form.postIds=e.postIds,r.form.roleIds=e.roleIds,r.open=!0,r.formTitle="修改用户",r.form.password=""}))},submitForm:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.submitLoading=!0,void 0!==e.form.userId?Object(a["l"])(e.form).then((function(t){e.$message.success("修改成功",3),e.open=!1,e.$emit("ok")})).finally((function(){e.submitLoading=!1})):Object(a["a"])(e.form).then((function(t){e.$message.success("新增成功",3),e.open=!1,e.$emit("ok")})).finally((function(){e.submitLoading=!1}))}))}}},i=n,u=r("2877"),l=Object(u["a"])(i,o,s,!1,null,null,null);t["default"]=l.exports}}]);